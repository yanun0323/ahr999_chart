"use strict";var f=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var X=Object.prototype.hasOwnProperty;var Z=(e,r)=>{for(var a in r)f(e,a,{get:r[a],enumerable:!0})},$=(e,r,a,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of W(r))!X.call(e,t)&&t!==a&&f(e,t,{get:()=>r[t],enumerable:!(s=Q(r,t))||s.enumerable});return e};var x=e=>$(f({},"__esModule",{value:!0}),e);var ve={};Z(ve,{AbortSignalPlugin:()=>z,BlobPlugin:()=>P,CustomEventPlugin:()=>h,DOMExceptionPlugin:()=>D,EventPlugin:()=>A,FilePlugin:()=>d,FormDataPlugin:()=>I,HeadersPlugin:()=>i,ImageDataPlugin:()=>U,ReadableStreamPlugin:()=>p,RequestPlugin:()=>H,ResponsePlugin:()=>j,URLPlugin:()=>G,URLSearchParamsPlugin:()=>K});module.exports=x(ve);var y=require("seroval"),m=e=>{let r=new AbortController,a=r.abort.bind(r);return e.then(a,a),r};function ee(e){e(this.reason)}function re(e){this.addEventListener("abort",ee.bind(this,e),{once:!0})}function w(e){return new Promise(re.bind(e))}var u={},ae=(0,y.createPlugin)({tag:"seroval-plugins/web/AbortControllerFactoryPlugin",test(e){return e===u},parse:{sync(){return u},async async(){return await Promise.resolve(u)},stream(){return u}},serialize(){return m.toString()},deserialize(){return m}}),te=(0,y.createPlugin)({tag:"seroval-plugins/web/AbortSignal",extends:[ae],test(e){return typeof AbortSignal=="undefined"?!1:e instanceof AbortSignal},parse:{sync(e,r){return e.aborted?{reason:r.parse(e.reason)}:{}},async async(e,r){if(e.aborted)return{reason:await r.parse(e.reason)};let a=await w(e);return{reason:await r.parse(a)}},stream(e,r){if(e.aborted)return{reason:r.parse(e.reason)};let a=w(e);return{factory:r.parse(u),controller:r.parse(a)}}},serialize(e,r){return e.reason?"AbortSignal.abort("+r.serialize(e.reason)+")":e.controller&&e.factory?"("+r.serialize(e.factory)+")("+r.serialize(e.controller)+").signal":"(new AbortController).signal"},deserialize(e,r){return e.reason?AbortSignal.abort(r.deserialize(e.reason)):e.controller?m(r.deserialize(e.controller)).signal:new AbortController().signal}}),z=te;var R=require("seroval"),se=(0,R.createPlugin)({tag:"seroval-plugins/web/Blob",test(e){return typeof Blob=="undefined"?!1:e instanceof Blob},parse:{async async(e,r){return{type:await r.parse(e.type),buffer:await r.parse(await e.arrayBuffer())}}},serialize(e,r){return"new Blob(["+r.serialize(e.buffer)+"],{type:"+r.serialize(e.type)+"})"},deserialize(e,r){return new Blob([r.deserialize(e.buffer)],{type:r.deserialize(e.type)})}}),P=se;var N=require("seroval");function g(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var oe=(0,N.createPlugin)({tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent=="undefined"?!1:e instanceof CustomEvent},parse:{sync(e,r){return{type:r.parse(e.type),options:r.parse(g(e))}},async async(e,r){return{type:await r.parse(e.type),options:await r.parse(g(e))}},stream(e,r){return{type:r.parse(e.type),options:r.parse(g(e))}}},serialize(e,r){return"new CustomEvent("+r.serialize(e.type)+","+r.serialize(e.options)+")"},deserialize(e,r){return new CustomEvent(r.deserialize(e.type),r.deserialize(e.options))}}),h=oe;var E=require("seroval"),ne=(0,E.createPlugin)({tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException=="undefined"?!1:e instanceof DOMException},parse:{sync(e,r){return{name:r.parse(e.name),message:r.parse(e.message)}},async async(e,r){return{name:await r.parse(e.name),message:await r.parse(e.message)}},stream(e,r){return{name:r.parse(e.name),message:r.parse(e.message)}}},serialize(e,r){return"new DOMException("+r.serialize(e.message)+","+r.serialize(e.name)+")"},deserialize(e,r){return new DOMException(r.deserialize(e.message),r.deserialize(e.name))}}),D=ne;var F=require("seroval");function c(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var ie=(0,F.createPlugin)({tag:"seroval-plugins/web/Event",test(e){return typeof Event=="undefined"?!1:e instanceof Event},parse:{sync(e,r){return{type:r.parse(e.type),options:r.parse(c(e))}},async async(e,r){return{type:await r.parse(e.type),options:await r.parse(c(e))}},stream(e,r){return{type:r.parse(e.type),options:r.parse(c(e))}}},serialize(e,r){return"new Event("+r.serialize(e.type)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Event(r.deserialize(e.type),r.deserialize(e.options))}}),A=ie;var O=require("seroval"),le=(0,O.createPlugin)({tag:"seroval-plugins/web/File",test(e){return typeof File=="undefined"?!1:e instanceof File},parse:{async async(e,r){return{name:await r.parse(e.name),options:await r.parse({type:e.type,lastModified:e.lastModified}),buffer:await r.parse(await e.arrayBuffer())}}},serialize(e,r){return"new File(["+r.serialize(e.buffer)+"],"+r.serialize(e.name)+","+r.serialize(e.options)+")"},deserialize(e,r){return new File([r.deserialize(e.buffer)],r.deserialize(e.name),r.deserialize(e.options))}}),d=le;var S=require("seroval");function b(e){let r=[];return e.forEach((a,s)=>{r.push([s,a])}),r}var o={},C=(e,r=new FormData,a=0,s=e.length,t)=>{for(;a<s;a++)t=e[a],r.append(t[0],t[1]);return r},pe=(0,S.createPlugin)({tag:"seroval-plugins/web/FormDataFactory",test(e){return e===o},parse:{sync(){return o},async async(){return await Promise.resolve(o)},stream(){return o}},serialize(){return C.toString()},deserialize(){return o}}),ue=(0,S.createPlugin)({tag:"seroval-plugins/web/FormData",extends:[d,pe],test(e){return typeof FormData=="undefined"?!1:e instanceof FormData},parse:{sync(e,r){return{factory:r.parse(o),entries:r.parse(b(e))}},async async(e,r){return{factory:await r.parse(o),entries:await r.parse(b(e))}},stream(e,r){return{factory:r.parse(o),entries:r.parse(b(e))}}},serialize(e,r){return"("+r.serialize(e.factory)+")("+r.serialize(e.entries)+")"},deserialize(e,r){return C(r.deserialize(e.entries))}}),I=ue;var B=require("seroval");function v(e){let r=[];return e.forEach((a,s)=>{r.push([s,a])}),r}var de=(0,B.createPlugin)({tag:"seroval-plugins/web/Headers",test(e){return typeof Headers=="undefined"?!1:e instanceof Headers},parse:{sync(e,r){return{value:r.parse(v(e))}},async async(e,r){return{value:await r.parse(v(e))}},stream(e,r){return{value:r.parse(v(e))}}},serialize(e,r){return"new Headers("+r.serialize(e.value)+")"},deserialize(e,r){return new Headers(r.deserialize(e.value))}}),i=de;var T=require("seroval"),fe=(0,T.createPlugin)({tag:"seroval-plugins/web/ImageData",test(e){return typeof ImageData=="undefined"?!1:e instanceof ImageData},parse:{sync(e,r){return{data:r.parse(e.data),width:r.parse(e.width),height:r.parse(e.height),options:r.parse({colorSpace:e.colorSpace})}},async async(e,r){return{data:await r.parse(e.data),width:await r.parse(e.width),height:await r.parse(e.height),options:await r.parse({colorSpace:e.colorSpace})}},stream(e,r){return{data:r.parse(e.data),width:r.parse(e.width),height:r.parse(e.height),options:r.parse({colorSpace:e.colorSpace})}}},serialize(e,r){return"new ImageData("+r.serialize(e.data)+","+r.serialize(e.width)+","+r.serialize(e.height)+","+r.serialize(e.options)+")"},deserialize(e,r){return new ImageData(r.deserialize(e.data),r.deserialize(e.width),r.deserialize(e.height),r.deserialize(e.options))}}),U=fe;var l=require("seroval"),n={},M=e=>new ReadableStream({start:r=>{e.on({next:a=>{try{r.enqueue(a)}catch(s){}},throw:a=>{r.error(a)},return:()=>{try{r.close()}catch(a){}}})}}),me=(0,l.createPlugin)({tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===n},parse:{sync(){return n},async async(){return await Promise.resolve(n)},stream(){return n}},serialize(){return M.toString()},deserialize(){return n}});function L(e){let r=(0,l.createStream)(),a=e.getReader();async function s(){try{let t=await a.read();t.done?r.return(t.value):(r.next(t.value),await s())}catch(t){r.throw(t)}}return s().catch(()=>{}),r}var ye=(0,l.createPlugin)({tag:"seroval/plugins/web/ReadableStream",extends:[me],test(e){return typeof ReadableStream=="undefined"?!1:e instanceof ReadableStream},parse:{sync(e,r){return{factory:r.parse(n),stream:r.parse((0,l.createStream)())}},async async(e,r){return{factory:await r.parse(n),stream:await r.parse(L(e))}},stream(e,r){return{factory:r.parse(n),stream:r.parse(L(e))}}},serialize(e,r){return"("+r.serialize(e.factory)+")("+r.serialize(e.stream)+")"},deserialize(e,r){let a=r.deserialize(e.stream);return M(a)}}),p=ye;var q=require("seroval");function _(e,r){return{body:r,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var ge=(0,q.createPlugin)({tag:"seroval-plugins/web/Request",extends:[p,i],test(e){return typeof Request=="undefined"?!1:e instanceof Request},parse:{async async(e,r){return{url:await r.parse(e.url),options:await r.parse(_(e,e.body&&!e.bodyUsed?await e.clone().arrayBuffer():null))}},stream(e,r){return{url:r.parse(e.url),options:r.parse(_(e,e.body&&!e.bodyUsed?e.clone().body:null))}}},serialize(e,r){return"new Request("+r.serialize(e.url)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Request(r.deserialize(e.url),r.deserialize(e.options))}}),H=ge;var Y=require("seroval");function k(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var ce=(0,Y.createPlugin)({tag:"seroval-plugins/web/Response",extends:[p,i],test(e){return typeof Response=="undefined"?!1:e instanceof Response},parse:{async async(e,r){return{body:await r.parse(e.body&&!e.bodyUsed?await e.clone().arrayBuffer():null),options:await r.parse(k(e))}},stream(e,r){return{body:r.parse(e.body&&!e.bodyUsed?e.clone().body:null),options:r.parse(k(e))}}},serialize(e,r){return"new Response("+r.serialize(e.body)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Response(r.deserialize(e.body),r.deserialize(e.options))}}),j=ce;var V=require("seroval"),be=(0,V.createPlugin)({tag:"seroval-plugins/web/URL",test(e){return typeof URL=="undefined"?!1:e instanceof URL},parse:{sync(e,r){return{value:r.parse(e.href)}},async async(e,r){return{value:await r.parse(e.href)}},stream(e,r){return{value:r.parse(e.href)}}},serialize(e,r){return"new URL("+r.serialize(e.value)+")"},deserialize(e,r){return new URL(r.deserialize(e.value))}}),G=be;var J=require("seroval"),Se=(0,J.createPlugin)({tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams=="undefined"?!1:e instanceof URLSearchParams},parse:{sync(e,r){return{value:r.parse(e.toString())}},async async(e,r){return{value:await r.parse(e.toString())}},stream(e,r){return{value:r.parse(e.toString())}}},serialize(e,r){return"new URLSearchParams("+r.serialize(e.value)+")"},deserialize(e,r){return new URLSearchParams(r.deserialize(e.value))}}),K=Se;
